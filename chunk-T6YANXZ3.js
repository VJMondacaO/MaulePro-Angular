import{a as A}from"./chunk-BXYBAWJL.js";import"./chunk-OFF2PP4V.js";import{a as L,j as $}from"./chunk-YQKCDUCP.js";import{a as q,b as N}from"./chunk-E3G4EPMP.js";import{b as P,e as D,g as I,m as R,t as O,u as j}from"./chunk-RPW7BR5M.js";import"./chunk-URT2J5BT.js";import"./chunk-BMA7WWEI.js";import{Ea as B,Ga as V,i as k,n as M,p as F}from"./chunk-VOIOZGVW.js";import{Ab as m,Bb as C,La as d,Mb as l,Nb as _,Qa as u,Xa as S,Z as f,_ as h,bb as x,fc as T,ib as g,ma as c,mc as w,nb as b,qb as y,rb as E,sb as i,tb as r,ub as p,yb as v}from"./chunk-TDMTREWI.js";var K=(s,e)=>e.id;function Q(s,e){if(s&1){let o=v();i(0,"button",27),m("click",function(){f(o);let n=C();return h(n.clearFilters())}),p(1,"i",28),l(2," Limpiar filtros "),r()}}function U(s,e){if(s&1&&(i(0,"div",25),p(1,"app-program-card",29),r()),s&2){let o=e.$implicit;d(),g("program",o)}}function W(s,e){if(s&1){let o=v();i(0,"div",26),p(1,"i",30),i(2,"h3",31),l(3,"No se encontraron programas"),r(),i(4,"p",32),l(5,"Intenta ajustar los filtros o busca con otros t\xE9rminos"),r(),i(6,"button",33),m("click",function(){f(o);let n=C();return h(n.clearFilters())}),r()()}}var z=class s{constructor(e,o,t,n){this.programsService=e;this.router=o;this.route=t;this.cdr=n;this.loadPrograms()}programas=c([]);searchTerm=c("");selectedEstado=c(null);selectedTipoFondo=c(null);estadoOptions=[{label:"Abierto",value:"open"},{label:"Pr\xF3ximamente",value:"soon"},{label:"Cerrado",value:"closed"}];tipoFondoOptions=w(()=>{let e=new Set;return this.programas().forEach(o=>{o.tipoFondo&&e.add(o.tipoFondo)}),Array.from(e).sort().map(o=>({label:o,value:o}))});filteredPrograms=w(()=>{let e=[...this.programas()],o=this.searchTerm().toLowerCase().trim(),t=this.selectedEstado(),n=this.selectedTipoFondo();return o&&(e=e.filter(a=>{let G=a.titulo?.toLowerCase()||"",H=a.descripcion?.toLowerCase()||"",J=a.beneficiarios?.toLowerCase()||"";return G.includes(o)||H.includes(o)||J.includes(o)})),t&&(e=e.filter(a=>this.getEstadoReal(a)===t)),n&&(e=e.filter(a=>a.tipoFondo===n)),e});loadPrograms(){this.programsService.getPrograms().subscribe(e=>{this.programas.set(e),this.cdr.markForCheck()})}ngOnInit(){window.scrollTo({top:0,left:0,behavior:"instant"}),this.route.queryParams.subscribe(e=>{e.q&&this.searchTerm.set(e.q),e.estado&&this.selectedEstado.set(e.estado),e.tipo&&this.selectedTipoFondo.set(e.tipo)})}getEstadoReal(e){return L(e)}onSearchClick(){let e={},o=this.searchTerm(),t=this.selectedEstado(),n=this.selectedTipoFondo();o&&o.trim()!==""&&(e.q=o.trim()),t&&(e.estado=t),n&&(e.tipo=n),this.router.navigate(["/buscar"],{queryParams:e})}clearFilters(){this.searchTerm.set(""),this.selectedEstado.set(null),this.selectedTipoFondo.set(null),this.router.navigate(["/buscar"])}goBack(){this.router.navigate(["/home"])}static \u0275fac=function(o){return new(o||s)(u($),u(F),u(M),u(T))};static \u0275cmp=S({type:s,selectors:[["app-search"]],decls:38,vars:11,consts:[[1,"min-h-screen","px-6","py-8","bg-gradient-to-br","from-slate-50","to-slate-200","md:px-8","md:py-12","lg:px-10","lg:py-16"],[1,"max-w-7xl","mx-auto","w-full"],[1,"mb-6"],[1,"inline-flex","items-center","gap-2.5","px-6","py-3","bg-white","border-2","border-gray-200","text-slate-600","rounded-xl","font-semibold","text-[0.95rem]","cursor-pointer","transition-all","duration-300","shadow-sm","hover:bg-slate-50","hover:border-[#0066CC]","hover:text-[#0066CC]","hover:-translate-x-1","hover:shadow-md","active:-translate-x-0.5",3,"click"],[1,"pi","pi-arrow-left","text-base","transition-transform","duration-300","group-hover:-translate-x-0.5"],[1,"mb-8","text-center","md:mb-10"],[1,"text-3xl","font-bold","text-[#0C1B41]","mb-3","leading-[1.3]","tracking-tight","md:text-4xl","lg:text-5xl"],[1,"text-base","text-slate-500","m-0","max-w-[700px]","mx-auto","leading-relaxed","md:text-lg"],[1,"bg-white","rounded-2xl","p-8","mb-10","shadow-md","border","border-gray-200","md:p-10","lg:p-12"],[1,"flex","flex-col","gap-4","mb-8","pb-6","border-b-2","border-gray-100","md:flex-row","md:items-center","md:justify-between"],[1,"flex","flex-col","gap-2","md:flex-row","md:items-center","md:gap-4"],[1,"text-2xl","font-bold","text-[#1C1C1C]","m-0","leading-[1.3]","tracking-tight","md:text-3xl"],["type","button",1,"flex","items-center","gap-2","px-5","py-2.5","bg-transparent","border-2","border-gray-200","text-slate-500","rounded-lg","font-semibold","text-sm","cursor-pointer","transition-all","duration-300","whitespace-nowrap","hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600","hover:-translate-y-px"],[1,"w-full"],[1,"flex","flex-col","gap-4","w-full","md:flex-row","md:items-center","lg:gap-5"],["placeholder","Estado","optionLabel","label","optionValue","value","styleClass","w-full md:w-48",3,"ngModelChange","options","ngModel","showClear"],["placeholder","Tipo de Fondo","optionLabel","label","optionValue","value","styleClass","w-full md:w-64",3,"ngModelChange","options","ngModel","showClear"],[1,"flex-1","min-w-[200px]","flex","items-center","gap-3","md:flex-[1.5]","md:min-w-[250px]","md:gap-4"],["type","text","pInputText","","placeholder","Buscar programas...",1,"w-full",3,"ngModelChange","keyup.enter","ngModel"],["pButton","","type","button","label","Buscar","icon","pi pi-search",3,"click"],[1,"mt-6","pt-6","border-t","border-gray-100"],[1,"flex","items-center","gap-2","m-0","text-gray-500","text-[0.95rem]"],[1,"pi","pi-filter","text-[#0066CC]","text-base"],[1,"text-[#1C1C1C]","font-semibold"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","3xl:grid-cols-4","gap-6","md:gap-5","xl:gap-8"],[1,"flex","flex-col","items-stretch","box-border","h-[560px]","max-h-[560px]"],[1,"text-center","py-16","px-8","bg-white","rounded-2xl","shadow-md"],["type","button",1,"flex","items-center","gap-2","px-5","py-2.5","bg-transparent","border-2","border-gray-200","text-slate-500","rounded-lg","font-semibold","text-sm","cursor-pointer","transition-all","duration-300","whitespace-nowrap","hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600","hover:-translate-y-px",3,"click"],[1,"pi","pi-times","text-base"],[1,"w-full","flex","flex-auto","items-stretch","h-full",3,"program"],[1,"pi","pi-search","text-6xl","text-slate-300","mb-6"],[1,"text-2xl","font-bold","text-[#1C1C1C]","mb-3"],[1,"text-base","text-slate-500","mb-8"],["pButton","","type","button","label","Limpiar filtros","icon","pi pi-refresh",1,"p-button-outlined",3,"click"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),m("click",function(){return t.goBack()}),p(4,"i",4),l(5," Volver al inicio "),r()(),i(6,"div",5)(7,"h1",6),l(8,"Buscador de Programas"),r(),i(9,"p",7),l(10," Encuentra el fondo ideal para tu proyecto filtrando por estado, tipo de fondo o palabras clave. "),r()(),i(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),l(15,"Filtros de b\xFAsqueda"),r(),x(16,Q,3,0,"button",12),r(),i(17,"div",13)(18,"div",14)(19,"p-dropdown",15),m("ngModelChange",function(a){return t.selectedEstado.set(a)}),r(),i(20,"p-dropdown",16),m("ngModelChange",function(a){return t.selectedTipoFondo.set(a)}),r(),i(21,"div",17)(22,"input",18),m("ngModelChange",function(a){return t.searchTerm.set(a)})("keyup.enter",function(){return t.onSearchClick()}),r(),i(23,"button",19),m("click",function(){return t.onSearchClick()}),r()()()()(),i(24,"div",20)(25,"p",21),p(26,"i",22),l(27," Mostrando "),i(28,"strong",23),l(29),r(),l(30," de "),i(31,"strong",23),l(32),r(),l(33," programas "),r()()(),i(34,"div",24),y(35,U,2,1,"div",25,K),r(),x(37,W,7,0,"div",26),r()()),o&2&&(d(16),b(t.searchTerm()||t.selectedEstado()||t.selectedTipoFondo()?16:-1),d(3),g("options",t.estadoOptions)("ngModel",t.selectedEstado())("showClear",!0),d(),g("options",t.tipoFondoOptions())("ngModel",t.selectedTipoFondo())("showClear",!0),d(2),g("ngModel",t.searchTerm()),d(7),_(t.filteredPrograms().length),d(3),_(t.programas().length),d(3),E(t.filteredPrograms()),d(2),b(t.filteredPrograms().length===0?37:-1))},dependencies:[k,R,P,D,I,A,j,O,N,q,V,B],encapsulation:2,changeDetection:0})};export{z as SearchComponent};
